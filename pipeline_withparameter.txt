import groovy.json.*
import groovy.json.JsonSlurper

@Library("piper-library-os") _

def is_ko=false;
def err_mess
 try
 {
  node 
  {
    stage('Example')
	{
	   if (env.BRANCH_NAME == 'master') 
	   {
            echo 'I only execute on the master branch'
        }else
	{
	    echo "I executed some where else"
	    err_mess= "Fail"
	}
    }
  }
}
 catch(Exception e)
    {
      echo "ERROR: " + e.getMessage()
      is_ko= "true"
      err_mess += "-> " + e.getMessage()
    }
	finally
      {
        stage("Final contact DOO")
        {
          if ( err_mess == "Fail")
          {
            echo "script completed with error"
			}else
			{
			echo "script completed without error"
          }
        }
      }
